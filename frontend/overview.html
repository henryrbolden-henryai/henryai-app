<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Application Strategy Overview - HenryHQ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            color: #e0e0e0;
            padding: 20px;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .nav-links {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            color: #60a5fa;
            text-decoration: none;
            font-size: 14px;
            transition: color 0.2s;
        }

        .back-link:hover {
            color: #93c5fd;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #ffffff;
        }

        .subtitle {
            color: #9ca3af;
            margin-bottom: 60px;
            font-size: 1.2rem;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .nav-card {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            border: 1px solid #374151;
            border-radius: 16px;
            padding: 40px;
            text-decoration: none;
            color: inherit;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #60a5fa, #3b82f6);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease;
        }

        .nav-card:hover {
            transform: translateY(-8px);
            border-color: #60a5fa;
            box-shadow: 0 20px 40px rgba(96, 165, 250, 0.2);
        }

        .nav-card:hover::before {
            transform: scaleX(1);
        }

        /* Coming Soon Cards */
        .nav-card.coming-soon {
            opacity: 0.7;
            cursor: default;
        }

        .nav-card.coming-soon:hover {
            transform: none;
            border-color: #374151;
            box-shadow: none;
        }

        .nav-card.coming-soon:hover::before {
            transform: scaleX(0);
        }

        .coming-soon-badge {
            display: inline-block;
            background: linear-gradient(90deg, #f59e0b, #d97706);
            color: #000;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 4px 10px;
            border-radius: 4px;
            margin-bottom: 16px;
        }

        .beta-badge {
            display: inline-block;
            background: linear-gradient(90deg, #8b5cf6, #6d28d9);
            color: #fff;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 4px 10px;
            border-radius: 4px;
            margin-bottom: 16px;
        }

        .nav-card.coming-soon .card-cta {
            color: #6b7280;
        }

        .card-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            display: block;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 12px;
            color: #ffffff;
        }

        .card-subtitle {
            font-size: 0.95rem;
            color: #9ca3af;
            margin-bottom: 20px;
        }

        .card-insight {
            background: rgba(34, 211, 238, 0.1);
            border-left: 3px solid #22d3ee;
            padding: 10px 14px;
            margin-bottom: 16px;
            border-radius: 0 8px 8px 0;
            font-size: 0.9rem;
            color: #e0e0e0;
            display: none;
        }

        .card-insight.visible {
            display: block;
        }

        .card-insight .insight-highlight {
            color: #22d3ee;
            font-weight: 600;
        }

        .card-description {
            color: #d1d5db;
            line-height: 1.7;
            margin-bottom: 25px;
            font-size: 0.95rem;
        }

        .card-cta {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #60a5fa;
            font-weight: 600;
            font-size: 0.95rem;
            transition: gap 0.2s ease;
        }

        .nav-card:hover .card-cta {
            gap: 12px;
        }

        .analyze-another {
            text-align: center;
            margin-top: 40px;
            padding-top: 40px;
            border-top: 1px solid #374151;
        }

        .analyze-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 14px 28px;
            background: transparent;
            color: #9ca3af;
            border: 1px solid #4b5563;
            border-radius: 8px;
            text-decoration: none;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .analyze-link:hover {
            background: rgba(255, 255, 255, 0.05);
            color: #e0e0e0;
            border-color: #60a5fa;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }

            .nav-card {
                padding: 30px;
            }
        }

        /* HEADER */
        header {
            padding: 24px 0;
            border-bottom: 1px solid #374151;
            margin-bottom: 32px;
        }

        header .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .logo {
            font-family: 'Instrument Serif', Georgia, serif;
            font-size: 1.8rem;
            color: #ffffff;
            text-decoration: none;
            position: fixed;
            left: 90px;
            top: 24px;
            z-index: 100;
        }

        .logo em {
            font-style: italic;
            color: #22d3ee;
        }

        .header-nav {
            display: flex;
            gap: 24px;
            align-items: center;
        }

        .nav-link {
            color: #9ca3af;
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.2s ease;
        }

        .nav-link:hover {
            color: #22d3ee;
        }
    </style>
    <link rel="stylesheet" href="css/mobile.css">
    <!-- Supabase Auth -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-client.js"></script>
</head>
<body>
    <!-- HEADER -->
    <header>
        <div class="header-container">
            <a href="index.html" class="logo"><em>Henry</em>HQ</a>
        </div>
    </header>

    <div class="container">
        <h1>Your Application Strategy Overview</h1>
        <p class="subtitle">Everything you need to apply for this role, tailored to stand out.</p>

        <div class="cards-grid">
            <!-- Card 1: Positioning Strategy -->
            <a href="positioning.html" class="nav-card">
                <span class="card-icon">üìç</span>
                <h2 class="card-title">Your Positioning Strategy</h2>
                <p class="card-subtitle">Strategic framing and key decisions</p>
                <p class="card-insight" id="positioningInsight"></p>
                <p class="card-description">
                    How to position yourself for this role. Includes what to emphasize,
                    what to avoid, key positioning decisions, and how to handle concerns.
                </p>
                <div class="card-cta">
                    View Strategy <span>‚Üí</span>
                </div>
            </a>

            <!-- Card 2: Tailored Documents -->
            <a href="documents.html" class="nav-card">
                <span class="card-icon">üìÑ</span>
                <h2 class="card-title">Your Tailored Documents</h2>
                <p class="card-subtitle">Resume and cover letter with explanations</p>
                <p class="card-insight" id="documentsInsight"></p>
                <p class="card-description">
                    ATS-optimized resume and custom cover letter tailored for this role.
                    See exactly what changed and why, then download both documents.
                </p>
                <div class="card-cta">
                    Review & Download <span>‚Üí</span>
                </div>
            </a>

            <!-- Card 3: LinkedIn Optimization -->
            <a href="linkedin-optimization.html" class="nav-card">
                <span class="card-icon">üíº</span>
                <h2 class="card-title">LinkedIn Optimization</h2>
                <p class="card-subtitle">Profile scoring and optimization</p>
                <p class="card-insight" id="linkedinInsight"></p>
                <p class="card-description">
                    See how recruiters view your LinkedIn profile. Get a searchability score,
                    identify gaps, and receive optimized headline, summary, and skills recommendations.
                </p>
                <div class="card-cta">
                    Optimize Profile <span>‚Üí</span>
                </div>
            </a>

            <!-- Card 4: Network Intelligence -->
            <a href="outreach.html" class="nav-card">
                <span class="card-icon">ü§ù</span>
                <h2 class="card-title">Network Intelligence & Outreach</h2>
                <p class="card-subtitle">Who to contact and what to say</p>
                <p class="card-insight" id="networkInsight"></p>
                <p class="card-description">
                    Identify the hiring manager and recruiter, get strategic guidance on outreach timing,
                    and use proven templates that sell your candidacy.
                </p>
                <div class="card-cta">
                    View Strategy <span>‚Üí</span>
                </div>
            </a>

            <!-- Card 6: Interview Intelligence -->
            <a href="interview-intelligence.html" class="nav-card">
                <span class="card-icon">üéØ</span>
                <h2 class="card-title">Interview Intelligence</h2>
                <p class="card-subtitle">Interviewer research, prep guides, and practice</p>
                <p class="card-insight" id="interviewInsight"></p>
                <p class="card-description">
                    Upload interviewer LinkedIn profiles for personalized strategy and talking points.
                    Get stage-specific prep guides, practice mock interviews with <em style="color: #22d3ee; font-style: italic;">Henry's</em> feedback, and track your interview pipeline.
                </p>
                <div class="card-cta">
                    Prepare & Practice <span>‚Üí</span>
                </div>
            </a>

            <!-- Card 7: Offer Negotiation (Coming Soon) -->
            <div class="nav-card coming-soon">
                <span class="coming-soon-badge">Coming Soon</span>
                <span class="card-icon">üí∞</span>
                <h2 class="card-title">Offer Negotiation</h2>
                <p class="card-subtitle">Salary strategy and negotiation tactics</p>
                <p class="card-description">
                    Market-based compensation data, your target range, and strategic guidance 
                    on timing, comp mix, and how to frame your ask based on your unique value.
                </p>
                <div class="card-cta">
                    Coming in Phase 2
                </div>
            </div>
        </div>

        <!-- Analyze Another Role -->
        <div class="analyze-another">
            <a href="analyze.html" class="analyze-link">
                <span>üîç</span> Analyze Another Role
            </a>
        </div>
    </div>

    <script>
        // Verify we have analysis data and generate insights
        window.addEventListener('DOMContentLoaded', () => {
            // Use FlowState if available for consistent storage access
            let data = null;

            if (typeof FlowState !== 'undefined') {
                data = FlowState.get('analysisData');
            } else {
                // Fallback: try sessionStorage then localStorage
                let dataStr = sessionStorage.getItem('analysisData');
                if (!dataStr) {
                    dataStr = localStorage.getItem('analysisData_backup');
                    if (dataStr) {
                        console.log('Safari fallback: loaded analysisData from localStorage');
                        sessionStorage.setItem('analysisData', dataStr);
                    }
                }
                if (dataStr) {
                    try {
                        data = JSON.parse(dataStr);
                    } catch (e) {
                        console.error('Error parsing analysisData:', e);
                    }
                }
            }

            if (!data) {
                window.location.href = 'index.html';
                return;
            }

            generateTeaserInsights(data);
        });

        function generateTeaserInsights(data) {
            // Positioning Insight - focus on gaps or concerns
            const positioningEl = document.getElementById('positioningInsight');
            if (data.gaps && data.gaps.length > 0) {
                const topGap = typeof data.gaps[0] === 'object' ? data.gaps[0].area || data.gaps[0].gap : data.gaps[0];
                positioningEl.innerHTML = `<span class="insight-highlight">Key gap to address:</span> ${topGap}. I have strategies to reframe this.`;
                positioningEl.classList.add('visible');
            } else if (data.concerns && data.concerns.length > 0) {
                const topConcern = typeof data.concerns[0] === 'object' ? data.concerns[0].concern : data.concerns[0];
                positioningEl.innerHTML = `<span class="insight-highlight">Potential concern:</span> ${topConcern}. See how to address it.`;
                positioningEl.classList.add('visible');
            }

            // Documents Insight - ATS keywords or fit score
            const documentsEl = document.getElementById('documentsInsight');
            const keywords = data.ats_keywords || data.required_skills || [];
            if (keywords.length > 0) {
                const keywordCount = keywords.length;
                positioningEl.innerHTML = `<span class="insight-highlight">Key gap to address:</span> ${typeof data.gaps?.[0] === 'object' ? data.gaps[0].area || data.gaps[0].gap : data.gaps?.[0] || 'positioning'}. I have strategies to reframe this.`;
                documentsEl.innerHTML = `<span class="insight-highlight">${keywordCount} ATS keywords</span> incorporated into your tailored resume.`;
                documentsEl.classList.add('visible');
            }

            // LinkedIn Insight - profile optimization
            const linkedinEl = document.getElementById('linkedinInsight');
            const linkedinData = sessionStorage.getItem('linkedinData');
            const linkedinScoringResults = sessionStorage.getItem('linkedinScoringResults');
            if (linkedinScoringResults) {
                try {
                    const scoring = JSON.parse(linkedinScoringResults);
                    const score = scoring.overall_score || scoring.score;
                    if (score) {
                        linkedinEl.innerHTML = `<span class="insight-highlight">Profile score: ${score}/100.</span> See what recruiters find when they search for you.`;
                        linkedinEl.classList.add('visible');
                    }
                } catch (e) {}
            }
            if (!linkedinEl.classList.contains('visible')) {
                linkedinEl.innerHTML = `<span class="insight-highlight">93% of recruiters</span> use LinkedIn to find candidates. Optimize your profile for this role.`;
                linkedinEl.classList.add('visible');
            }

            // Network Insight - hiring manager title
            const networkEl = document.getElementById('networkInsight');
            const outreach = data.outreach_intelligence || {};
            if (outreach.hiring_manager_likely_title) {
                networkEl.innerHTML = `<span class="insight-highlight">Likely hiring manager:</span> ${outreach.hiring_manager_likely_title}. Direct outreach can 2x your response rate.`;
                networkEl.classList.add('visible');
            } else if (data._company_name || data.company_name) {
                const company = data._company_name || data.company_name;
                networkEl.innerHTML = `<span class="insight-highlight">70% of jobs</span> are filled through referrals. See who to contact at ${company}.`;
                networkEl.classList.add('visible');
            }

            // Interview Insight - likely questions or company focus
            const interviewEl = document.getElementById('interviewInsight');
            const interviewPrep = data.interview_prep || {};
            if (interviewPrep.likely_questions && interviewPrep.likely_questions.length > 0) {
                const questionCount = interviewPrep.likely_questions.length;
                interviewEl.innerHTML = `<span class="insight-highlight">${questionCount} likely interview questions</span> identified. Practice with Henry before your interview.`;
                interviewEl.classList.add('visible');
            } else {
                interviewEl.innerHTML = `<span class="insight-highlight">Mock interviews available.</span> Practice with Henry and get real-time feedback.`;
                interviewEl.classList.add('visible');
            }

        }
    </script>
<script src="components/flow-state.js"></script>
<script src="components/analytics.js"></script>
<script src="components/hey-henry.js"></script>
<script src="components/admin-alerts.js"></script>
<script src="components/strategy-nav.js"></script>
    <script src="components/status-banner.js"></script>
<script src="components/top-nav.js"></script>
</body>
</html>
